type User {
  id: ID!
  givenName: String
  familyName: String
  emailAddress: String
  createdAt: String
  updatedAt: String
}

type FeatureFlag {
  id: ID!
  key: String
  value: String
  type: String
  createdAt: String
  updatedAt: String
}

type UserFeatureFlag {
  id: ID!
  value: String
  createdAt: String
  updatedAt: String
}

# Feature flags for a single user
type TargetUsersOutput {
  userId: ID!
  featureFlag: UserFeatureFlag!
}

type UserWithFlag {
  userId: ID!
  featureFlags: [FeatureFlag]!
}

type OverrideUserFeatureFlagOutput {
  userId: ID!
  featureFlagId: ID!
  value: String!
  updatedAt: String!
}

input UserFeatureFlagInput {
  id: ID!
  value: String
}

input TargetUsersInput {
  userId: ID!
  featureFlags: [UserFeatureFlagInput!]!
}

input OverrideUserFeatureFlagInput {
  userId: ID!
  featureFlagId: ID!
  value: String!
}

type Mutation {
  targetUsers(data: [TargetUsersInput]): [TargetUsersOutput!]!
  overrideUserFeatureFlag(data: OverrideUserFeatureFlagInput!): OverrideUserFeatureFlagOutput!
}

type Query {
  usersWithFlags: [UserWithFlag]!
}
